

Commands:
	data retrieving command that do multiple calls to the db should be done through transaction (could be technically added in the db manager)
	add specific/generic errors

usermanager:

AvatarManager:



friendManager:


MessageQueueManager:
	


CommandManager:
	test phase or remove it and make commands being singletons
	Same for manager Registry it is fancy but useless complexicity 


Commands:
	TESTING TIME:
	x OnUserSeen : signal a user has been active to friends change status to ONLINE (could be responsible for making a new user) 
	


	x EditUsernameCommand : change the username, signal friends about it, test the name validity, should call OnuserSeen First
	x getUserDataCommand(user_id) :
	x RemoveUserCommand(user_id) : removes user from db
	
	x getUseridCommand: Internal Call returns user_id for username
	x getUpdates(user_id)

	x getFriendList(user_id)
	x getPendingFriendRequest(user_id, friend_id)

	x addFriendRequest(user_id, friend_id)
	x acceptFriendRequest(user_id, friend_id)
	x refuseFriendRequest(user_id, friend_id)
	x cancelFriendRequest(user_id, friend_id)
	x removeFriend(user_id, friend_id)
	DONE:



API	

	JWT middleware isn't done since it will depend on how we manage auth
	and session and user_id
	# MiddleWare:
	 OnUserSeen : updates the last_seen of a user on certain routes
	 Require Auth: could block the rest of the route if user is not auth 
	 jwt_extractor : user_id extractor to know who's the sender and to indicate if it's a guest or not 

	#USER
	(public)
	GET user/:username : get the public info of a user

	(Auth)
	GET user : gets personnal info
	PUT user/username : changing username (user-id form jwt token new username in request)
	DELETE /user deletes the user profile


	(internal)
	POST user/:userid : create a new user entry with a name in ? or i coudl also use the OnUserSeen and use the user_id from the JWT token to make a new user? idk 

	GET user/:username/id ; returns the user id 
	
	#FRIENDS

	(Auth optionnal)
	GET user/:username/friends : get a user's friendlist if we don't make that a private info Auth would be optionnal

	(Auth required + OnSeen)
	GET friends/updates : returns friends update like status or username change
	
	GET /user/friends/ : get user's friendlist
	GET /user/friends/requests : get pending incoming? request
	GET /user/friends/requests/outgoing : get pending outgoing request
	
	POST /user/friends/request/outgoing/:username : tries to add a friend

	PUT /user/friends/request/:username : tries to accept a request
	DELETE /user/friends/request/:username : tries to refuse a request
	DELETE /user/friends/request/outgoing/:username : tries to cancel a request
	DELETE /user/friends/:username : tries to remove a friend

Errors:


